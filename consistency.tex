%\subsection{Consistence of the probabilistic model}
%\label{sec:stat:consis}

\mncomment{Comprobad que lo que digo en este parrafo es lo que queriais decir porque dais pocas pistas!}

\mncomment{No veo la utilidad de esto pero a lo mejor lo haceis porque es tipico en SPL... ni idea... pero yo lo quitaba sin piedad...}

Finally we prove an important property of our probabilistic language: its consistency. We say that a non-probabilistic SPL model is \emph{consistent} if it has products~\cite{acl13}.  In our case, we can define consistency by having $\ham(P)>0$. We will prove that a translation from our probabilistic framework into the non-probabilistic one keeps consistency in the expected way. 

\bdfn
  We define the translation function $\np:\fodaPAp\mapsto \fodaPA$ as follows:
  \begin{displaymath}
     \np(P)=
     \begin{cases}
       \ofeature{A};\np(P) & \mathrm{if}\ P=\feature{A};_pP\\
       \np(P) \choice \np(Q) & \mathrm{if}\ P \choice_{p} Q \\
       \np(P) & \mathrm{esta mal!!! otherwise}
     \end{cases}
  \end{displaymath}
\edfn
\mncomment{la traduccion esta mal, muy mal. Hay que aplicar np a $P$ y $Q$, asi que el otherwise hay que poner todos los casos}



\bprop\label{prop:relnonprob}
  Let $P,Q\in\fodaPAp$,

  \begin{enumerate}
  \item\label{prop:relnonprob-a} $P\vtranp{s}{p}Q$ iff $\np(P)\vtran{s}\np(Q)$.
  \item\label{prop:relnonprob-b} $pr\in\prod(\np(P))$ iff there is
    $p>0$ such that $(pr,p)\in\prodp(P)$.
  % \item\label{prop:relnonprob-c} $pr\in\semden{\np(P)}$ si y sólo si existe $p>0$ tal que $(pr,p)\in\semdenp{P}$.
  % \item\label{prop:relnonprob-d} Existe $p\in(0,1)$ tal que $(pr,p)\in\prodp(P)$ si y sólo si existe $q\in(0,1)$ tal que $(pr,q)\in\semdenp{P}$.
  \end{enumerate}
  \begin{proof}
    The rules with probabilities in Figure~\ref{fig:sos-rules-p} are
    the same in~\cite{acl13} but with probabilities. So any trace
    derived in the probabilistic model can be derived in the non
    probabilistic model. By Lemma~\ref{dfn:pr:sum} we know that any
    derived trace in the probabilistic model has a non nul probability.
  \end{proof}

\eprop

% As a direct consequence of the previous result we have the following Corollary.
% \bcor\label{cor:relnonprob}
%   Let $P,Q\in\fodaPAp$, There exists $p\in(0,1)$ such that
%   $(pr,p)\in\prodp(P)$ iff there exist $q\in(0,1)$ such that
%   $(pr,q)\in\semdenp(P)$.
% \ecor

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% ispell-local-dictionary: "english"
%%% End:
