\section{Consistencia del modelo probabilístico}
\label{sec:stat:consis}

La consistencia del modelo probabilístico se basa en la
consistencia del modelo no probabilístico. Esto implica
que deberá ser definida una función que permita realizar
una traducción directa entre \fodaPAp y \fodaPA,
de esta manera se demostrará que esta particularización
del modelo es consistente si y sólo si el modelo
no probabilístico lo es.

%\begin{itemize}
%\item Define the non probabilistic model.
%\item Define a function that remove probabilities.
%\item The probabilistic model has the same products a the corresponding non probabilistic one
%\item The probabilistic model is consistent iff corresponding non probabilistic one is consistent
%\end{itemize}

La sintaxis del modelo no probabilístico es presentada en la definición \ref{dfn:syntax}
%\bdfn
%A \emph{non-probabilistic software product line} is a term generated by the following Extended BNF-like expression:
%$$
%\begin{array}{ll}
%  P::=& \checkmark \barra \nil \barra \feature{A};P \barra
%    \ofeature{A};_{p} P \barra P \choice_{p} Q \barra P \paral Q \barra
%  \\ 
%  & \exclude{A}{B}{P}\barra  \require{A}{B}{P}\barra  \forbid{A}{P}\barra  \mandatory{A}{P}\\ 
%\end{array}     
%$$
%\noindent 
%where $\feature{A} \in \calF$. We will denote the set of terms of this algebra by $\fodaPA$.
%\edfn

\bdfn
  Se define la función $\np:\fodaPAp\mapsto \fodaPA$, 
  eliminando las información relacionada a las probabilidades.
  \begin{displaymath}
     \np(P)=
     \begin{cases}
       \ofeature{A};P & \mathrm{si}\ P=\feature{A};_pP\\
       P \choice Q & \mathrm{si}\ P \choice_{p} Q \\
       P & \mathrm{en\ cualquier\ otro\ caso}
     \end{cases}
  \end{displaymath}
\edfn



\bprop\label{prop:relnonprob}
  Dados los términos $P,Q\in\fodaPAp$, 
  
  \begin{enumerate}
  \item\label{prop:relnonprob-a} $P\vtranp{s}{p}Q$ si y sólo si $\np(P)\vtran{s}\np(Q)$.
  \todo{Deberiamos llamar a $\products{P}$ como $\prodp(P)$ en la sem denotacional ???   por consistencia?}
  \item\label{prop:relnonprob-b} $pr\in\prod(\np(P))$ si y sólo si existe $p>0$ tal que $(pr,p)\in\prodp(P)$.
  \item\label{prop:relnonprob-c} $pr\in\semden{\np(P)}$ si y sólo si existe $p>0$ tal que $(pr,p)\in\semdenp{P}$.
  \item\label{prop:relnonprob-d} Existe $p\in(0,1)$ tal que $(pr,p)\in\prodp(P)$ si y sólo si existe $q\in(0,1)$ tal que $(pr,q)\in\semdenp{P}$.
  \end{enumerate}
  
  
  
  \textit{Demostración}
    La demostración de las secciones~\ref{prop:relnonprob-a} y~\ref{prop:relnonprob-c} de la proposición 
    \ref{prop:relnonprob} es trivial ya que las reglas consideradas en ~\cite{acl13}
    son las mismas que las presentadas en el modelo probabilístico, simplemente
    eliminando la información relacionada a las probabilidades. En particular
    la sección ~\ref{prop:relnonprob-a} muestra que para cualquier transición
    de la extensión probabilística $P\vtranp{s}{p}Q$ existen los términos con la
    información probabilística eliminada $P$ y $Q$. La sección~\ref{prop:relnonprob-c}
    muestra que existe un producto $pr$ que pertenece al 
    conjunto de los productos no probabilísticos generados por la función $P$
    y este solo existirá
    si $pr$ existe dentro del conjunto de los productos generados por la función probabilística
    de $P$ y que su probabilidad sea mayor a 0.
    La sección~\ref{prop:relnonprob-b} 
    de la proposición \ref{prop:relnonprob} es una consecuencia directa de la sección ~\ref{prop:relnonprob-a} y muestra que el producto $pr$ existirá si y sólo si éste
    existe tanto en el conjunto de los productos probabilísticos como en el de los no
    probabilísticos.
    La sección~\ref{prop:relnonprob-d} se refiere a que existe una probabilidad $p\in(0,1)$
    de un producto probabilístico si y sólo si este producto existe dentro de los
    productos generados por la misma función de la semántica denotacional $P$.
%\todo{Hay que escribir esta demostración más detallada}
  
\eprop

% As a direct consequence of the previous result we have the following Corollary.
% \bcor\label{cor:relnonprob}
%   Let $P,Q\in\fodaPAp$, There exists $p\in(0,1)$ such that
%   $(pr,p)\in\prodp(P)$ iff there exist $q\in(0,1)$ such that
%   $(pr,q)\in\semdenp(P)$.  
% \ecor

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../../main"
%%% ispell-local-dictionary: "castellano"
%%% End: 
